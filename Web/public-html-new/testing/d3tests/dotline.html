<html>
    <head>
        <link   href="../lib/reset/reset.css" rel="stylesheet" type="text/css">
        <script src="../lib/jquery/jquery-1.9.1.js"></script>
        <script src="../lib/d3/d3.v3.min.js"></script>
        <style>
            body {
                background-color: #99d2f0;
            }
            div.container {
                position: absolute;
                left: 200px;
                top: 200px;
                bottom: 200px;
                right: 200px;
                max-width: 600px;
                background-color: white;
            }
            svg {
                border: 1px dotted black;
            }
        </style>
    </head>
    <body>
        <div class="container"></div>
    </body>
    <script>
        function dotPlot() {
            //default values
            var width = 100,
                height = 100,
                margin = 20;

            var container = null,
                xScale = d3.scale.linear(),
                yScale = d3.scale.ordinal(),
                rScale = d3.scale.linear(),
                circles = null;

            function chart(selection) {
                selection.each(function(data) {
                    container = selection;

                    yScale.domain(['a', 'b']); //get actual unique values
                    xScale.domain([0, d3.max(data, function(d) { return d[1]; })]);
                    rScale.domain([0, d3.max(data, function(d) { return d[2]; })]);

                    var svg = selection.append("svg");

                    circles = svg.selectAll("circle")
                        .data(data)
                        .enter()
                            .append("circle");

                    layout();
                });
            }

            function layout() {
                width = $(container.node()).width();
                height = $(container.node()).height();

                yScale.rangePoints([0, height], 1);
                xScale.range([margin, width-margin]);
                rScale.range([0, 40]);

                circles
                    .attr("cy", function(d) { return yScale(d[0]); })
                    .attr("cx", function(d) { return xScale(d[1]); })
                    .attr("r", function(d) { return rScale(d[2]); })
                    .style("fill", "#ccc");
            }

            chart.onSizeChanged = function() {
                layout();
            }

            return chart;
        }

        var myPlot = dotPlot()
        d3.select(".container")
            .datum([['a',10,3],['a',2,8],['b',9,9],['a',1,4],['b',7,3],['b',5,7]])
            .call(myPlot);

        $(window).resize(function() { myPlot.onSizeChanged(); });
    </script>
</html>